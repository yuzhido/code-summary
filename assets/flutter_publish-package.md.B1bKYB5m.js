import{_ as s,c as a,o as i,a4 as e}from"./chunks/framework.DeD0PINy.js";const b=JSON.parse('{"title":"如何在 pub.dev 发布 Dart/Flutter 包","description":"","frontmatter":{},"headers":[],"relativePath":"flutter/publish-package.md","filePath":"flutter/publish-package.md"}'),n={name:"flutter/publish-package.md"},l=e(`<h1 id="如何在-pub-dev-发布-dart-flutter-包" tabindex="-1">如何在 pub.dev 发布 Dart/Flutter 包 <a class="header-anchor" href="#如何在-pub-dev-发布-dart-flutter-包" aria-label="Permalink to &quot;如何在 pub.dev 发布 Dart/Flutter 包&quot;">​</a></h1><p>本文档将带你一步一步实现 Dart/Flutter 包发布到 pub.dev。</p><h2 id="🔄-第一步-配置-pub-镜像源" tabindex="-1">🔄 第一步：配置 pub 镜像源 <a class="header-anchor" href="#🔄-第一步-配置-pub-镜像源" aria-label="Permalink to &quot;🔄 第一步：配置 pub 镜像源&quot;">​</a></h2><p>在发布前，请确保你的 pub 镜像源设置为官方地址：</p><h3 id="检查当前源" tabindex="-1">检查当前源 <a class="header-anchor" href="#检查当前源" aria-label="Permalink to &quot;检查当前源&quot;">​</a></h3><ul><li>Windows（Command Prompt）命令行黑窗口：<div class="language-cmd vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cmd</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">echo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PUB_HOSTED_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li>Windows（PowerShell）新的终端：<div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">echo $</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">env:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PUB_HOSTED_URL</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li>macOS/Linux 命令行窗口：<div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $PUB_HOSTED_URL</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><p>如果输出结果是 <code>https://pub.dev</code>，可直接进入下一步；如果输出是其他镜像地址（如国内镜像:<code>https://pub.flutter-io.cn</code>），则需要切换。</p><h3 id="切换为官方源" tabindex="-1">切换为官方源 <a class="header-anchor" href="#切换为官方源" aria-label="Permalink to &quot;切换为官方源&quot;">​</a></h3><ul><li>Windows（Command Prompt）命令行黑窗口：<div class="language-cmd vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cmd</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PUB_HOSTED_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">https://pub.dev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li>Windows（PowerShell）新的终端：<div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">env:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PUB_HOSTED_URL </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://pub.dev&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li>macOS/Linux 命令行窗口：<div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PUB_HOSTED_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">https://pub.dev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><blockquote><p>注意：此操作仅影响当前终端会话，关闭终端后会自动恢复原设置</p></blockquote><h3 id="验证切换结果" tabindex="-1">验证切换结果 <a class="header-anchor" href="#验证切换结果" aria-label="Permalink to &quot;验证切换结果&quot;">​</a></h3><ul><li>Windows（Command Prompt）命令行黑窗口：<div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> %PUB_HOSTED_URL%</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 显示为才正确 https://pub.dev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li>Windows（PowerShell）新的终端：<div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">echo $</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">env:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PUB_HOSTED_URL  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 显示为才正确 https://pub.dev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li>macOS/Linux 命令行窗口：<div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $PUB_HOSTED_URL  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 显示为才正确 https://pub.dev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h2 id="🔍-第二步-项目准备与质量检查" tabindex="-1">🔍 第二步：项目准备与质量检查 <a class="header-anchor" href="#🔍-第二步-项目准备与质量检查" aria-label="Permalink to &quot;🔍 第二步：项目准备与质量检查&quot;">​</a></h2><h3 id="📁-1-项目结构要求" tabindex="-1">📁 1. 项目结构要求 <a class="header-anchor" href="#📁-1-项目结构要求" aria-label="Permalink to &quot;📁 1. 项目结构要求&quot;">​</a></h3><p>确保你的项目包含以下基本结构：📦 your_package_root ├── 📂 example/ # 示例代码 │ └── 📄 your_package_example.dart ├── 📂 lib/ # 包的主要代码 │ └── 📄 your_package.dart ├── 📂 test/ # 测试代码 │ └── 📄 your_package_test.dart ├── 📄 .gitignore ├── 📄 analysis_options.yaml ├── 📄 CHANGELOG.md # 更新日志 ├── 📄 LICENSE # 许可证 ├── 📄 pubspec.yaml # 包配置文件 └── 📄 README.md # 项目说明</p><h3 id="⚙️-2-配置-pubspec-yaml" tabindex="-1">⚙️ 2. 配置 pubspec.yaml <a class="header-anchor" href="#⚙️-2-配置-pubspec-yaml" aria-label="Permalink to &quot;⚙️ 2. 配置 pubspec.yaml&quot;">​</a></h3><p>确保包含以下必要字段：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yours_package_name</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 全小写，使用下划线分隔</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">description:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> description</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 描述包功能</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">version:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.0.0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 遵循语义化版本控制</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">repository:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/name/repo</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 包的 GitHub 仓库</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">environment:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dependencies:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 你的依赖项</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dev_dependencies:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 开发依赖</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="✅-3-质量检查清单" tabindex="-1">✅ 3. 质量检查清单 <a class="header-anchor" href="#✅-3-质量检查清单" aria-label="Permalink to &quot;✅ 3. 质量检查清单&quot;">​</a></h3><p>执行以下命令确保包的质量：</p><ul><li><p>运行测试</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>格式化代码</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> format</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>静态分析</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> analyze</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>发布前检查</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> publish</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dry-run</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h3 id="📝-4-文档准备" tabindex="-1">📝 4. 文档准备 <a class="header-anchor" href="#📝-4-文档准备" aria-label="Permalink to &quot;📝 4. 文档准备&quot;">​</a></h3><ul><li><p><strong>README.md</strong>：包含使用说明和示例</p></li><li><p><strong>CHANGELOG.md</strong>：记录版本变更</p><div class="language-markdown vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold;"># 1.0.0 - 202x-01-01 相关文档</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>LICENSE</strong>：选择合适的开源许可证</p></li></ul><blockquote><p>这些文件将直接影响你的 pub 评分 💯</p></blockquote><h2 id="🌐-第三步-网络环境准备-可选" tabindex="-1">🌐 第三步：网络环境准备（可选） <a class="header-anchor" href="#🌐-第三步-网络环境准备-可选" aria-label="Permalink to &quot;🌐 第三步：网络环境准备（可选）&quot;">​</a></h2><p>如果你的网络环境需要特殊配置：</p><ul><li>确保使用 <code>全局代理</code> + <code>虚拟网卡</code> 模式</li><li>验证可直接访问：pub.dev、Google 相关服务</li></ul><h2 id="🔑-第四步-开发者账号准备" tabindex="-1">🔑 第四步：开发者账号准备 <a class="header-anchor" href="#🔑-第四步-开发者账号准备" aria-label="Permalink to &quot;🔑 第四步：开发者账号准备&quot;">​</a></h2><ol><li><p><strong>注册账号</strong>：</p><ul><li>访问 pub.dev</li><li>使用 Google 账号登录</li></ul></li><li><p><strong>终端登录</strong>： 在项目的终端中运行：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> login</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>按照提示完成浏览器验证</p></li></ol><h2 id="🚀-第五步-发布你的包" tabindex="-1">🚀 第五步：发布你的包 <a class="header-anchor" href="#🚀-第五步-发布你的包" aria-label="Permalink to &quot;🚀 第五步：发布你的包&quot;">​</a></h2><ol><li><p><strong>执行发布命令</strong>：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> publish</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>确认发布</strong>：</p><ul><li>检查所有警告和提示</li><li>当提示 <code>Do you want to publish xxx (y/N)?</code> 时输入 <code>y</code></li></ul></li><li><p><strong>完成发布</strong>：</p><ul><li>等待上传完成</li><li>访问控制台输出的 URL 查看你的包</li></ul></li></ol><h2 id="📌-注意事项" tabindex="-1">📌 注意事项 <a class="header-anchor" href="#📌-注意事项" aria-label="Permalink to &quot;📌 注意事项&quot;">​</a></h2><ul><li>首次发布后，包名将永久保留</li><li>版本号遵循语义化版本</li><li>发布后可能需要几分钟才能在搜索中显示</li><li>后续更新需要递增版本号</li></ul><p>🎉 恭喜！你的包现在已可供全球开发者使用！</p>`,34),t=[l];function p(h,r,d,o,c,k){return i(),a("div",null,t)}const g=s(n,[["render",p]]);export{b as __pageData,g as default};
